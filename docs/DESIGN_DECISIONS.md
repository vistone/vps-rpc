# 设计决策

## 优先保证功能成功
- 请求链路按 h2 → h1 → std 逐级回退，确保在复杂网络环境下最大化成功率。

## 去中心的黑白名单
- 仅共享 200/403 观测报告；黑白名单状态严格以本地复测结果为准，避免误伤。

## 直连优先与 SNI/Host 保持
- 直连使用 DNS 池轮询的 A/AAAA IP，但 TLS SNI/HTTP Host 始终保持域名，以确保证书与路由正确。

## IPv6 直连能力
- 自动探测 IPv6 并绑定本机全局源地址，充分利用 IPv6 可达性与策略差异。

## 配置外部化与零配置 TLS
- 请求头默认项外部化到 `crawler.default_headers`；代码不再硬编码。
- 证书自动生成/加载，无需指定文件路径；绑定地址固定 `0.0.0.0`。

## 兼容字段保留
- `dns.blacklist_duration` 出于兼容保留，但实现采用“无过期黑名单”。

## 安全路线图
- 后续引入自定义根 CA 与 mTLS 保护 Peer 通道。
